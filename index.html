<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      referrerpolicy="no-referrer"
    />

    <style>
      .hide {
        display: none;
      }

      .fa-dumbbell {
        color: rgb(36, 104, 230);
      }
    </style>

    <title>Barbell Calculator</title>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col align-self-center text-center">
          <h1 class="display-6">Weight Calculator</h1>
          <i class="fas fa-dumbbell fa-3x"></i>
        </div>
      </div>
      <div class="row">
        <div class="card">
          <div class="card-body">
            <form>
              <div class="mb-3">
                <label for="totalWeight" class="form-label"
                  >Total Weight:</label
                >
                <input
                  type="text"
                  class="form-control totalWeight"
                  id="totalWeight"
                  aria-describedby="totalWeight"
                  placeholder="225"
                />
              </div>
              <div class="mb-3">
                <label for="percentage">Percentage:</label>
                <select
                  id="percentage"
                  class="form-select percentage"
                  aria-label="Default select example"
                >
                  <option value="100">100%</option>
                  <option value="95">95%</option>
                  <option value="90">90%</option>
                  <option value="85">85%</option>
                  <option value="80">80%</option>
                  <option value="75">75%</option>
                  <option value="70">70%</option>
                  <option value="65">65%</option>
                  <option value="60">60%</option>
                  <option value="55">55%</option>
                  <option value="50">50%</option>
                  <option value="45">45%</option>
                  <option value="40">40%</option>
                  <option value="35">35%</option>
                  <option value="30">30%</option>
                  <option value="25">25%</option>
                  <option value="20">20%</option>
                  <option value="15">15%</option>
                  <option value="10">10%</option>
                  <option value="5">5%</option>
                </select>
              </div>
              <div class="mb-3">
                <label for="barWeight" class="form-label">Bar Weight:</label>
                <input
                  type="text"
                  class="form-control"
                  id="barWeight"
                  aria-describedby="totalWeight"
                  value="45"
                />
              </div>
              <button type="submit" class="btn btn-primary">Caluclate</button>
              <button type="reset" class="reset btn btn-danger">Reset</button>
            </form>
            <div class="card-body mt-5 results hide">
              <h3>Plates</h3>
              <div class="mb-3">
                <button
                  type="button"
                  id="incrementBtn"
                  class="btn btn-primary btn-sm"
                >
                  +5lbs
                </button>
                <button
                  type="button"
                  id="decrementBtn"
                  class="btn btn-secondary btn-sm"
                >
                  -5lbs
                </button>
              </div>
              <small>Total Weight: <span id="totalWeightSpan"></span>lbs</small>
              <ul class="list-group">
                <li class="list-group-item">
                  45lb <span id="fortyFive" class="badge bg-primary"></span>
                </li>
                <li class="list-group-item">
                  25lb <span id="twentyFive" class="badge bg-primary"></span>
                </li>
                <li class="list-group-item">
                  10lb <span id="ten" class="badge bg-primary"></span>
                </li>
                <li class="list-group-item">
                  5lb <span id="five" class="badge bg-primary"></span>
                </li>
                <li class="list-group-item">
                  2.5lb <span id="twoPointFive" class="badge bg-primary"></span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script>
      const form = document.querySelector("form");
      const results = document.querySelector(".results");
      const resetBtn = document.querySelector(".reset");
      const incrementBtn = document.getElementById("incrementBtn");
      const decrementBtn = document.getElementById("decrementBtn");
      let totalWeight = document.getElementById("totalWeight");
      let percentage = document.getElementById("percentage");
      let barWeight = document.getElementById("barWeight");
      let totalWeightSpan = document.getElementById("totalWeightSpan");
      let fortyFive = document.getElementById("fortyFive");
      let twentyFive = document.getElementById("twentyFive");
      let ten = document.getElementById("ten");
      let five = document.getElementById("five");
      let twoPointFive = document.getElementById("twoPointFive");
      const badges = document.querySelectorAll(".badge");
      // let lb45;
      // let lb25;
      // let lb10;
      // let lb5;
      // let lb2andhalf;
      // let plateWeight;
      let overallWeight;

      form.addEventListener("submit", (e) => {
        e.preventDefault();

        overallWeight =
          Math.round((totalWeight.value * (percentage.value / 100)) / 5) * 5;
        const calcWeights = () => {
          totalWeightSpan.textContent = overallWeight;

          if (overallWeight < 45) {
            alert("Weight Must Be over 45lbs");
            window.location.reload();
          }

          let plateWeight = overallWeight - barWeight.value;

          //Calucate 45s
          let lb45 = Math.floor(plateWeight / 90);
          plateWeight = plateWeight - lb45 * 90;

          let lb25 = Math.floor(plateWeight / 50);
          plateWeight = plateWeight - lb25 * 50;

          let lb10 = Math.floor(plateWeight / 20);
          plateWeight = plateWeight - lb10 * 20;

          let lb5 = Math.floor(plateWeight / 10);
          plateWeight = plateWeight - lb5 * 10;

          let lb2andhalf = Math.floor(plateWeight / 5);
          plateWeight = plateWeight - lb2andhalf * 5;

          console.log(lb45, lb25, lb10, lb5, lb2andhalf, "TOP");

          lb45 > 0 ? (fortyFive.innerText = lb45) : null;
          lb25 > 0 ? (twentyFive.innerText = lb25) : null;
          lb10 > 0 ? (ten.innerText = lb10) : null;
          lb5 > 0 ? (five.innerText = lb5) : null;
          lb2andhalf > 0 ? (twoPointFive.innerText = lb2andhalf) : null;
        };

        calcWeights();

        incrementBtn.addEventListener("click", () => {
          totalWeight.value = overallWeight = overallWeight + 5;

          lb45 = lb25 = lb10 = lb5 = lb2andhalf = plateWeight = 0;

          console.log(lb45, lb25, lb10, lb5, lb2andhalf, "inc");

          badges.forEach((badge) => {
            badge.innerText = "";
          });

          calcWeights();
        });

        decrementBtn.addEventListener("click", () => {
          totalWeight.value = overallWeight = overallWeight - 5;

          lb45 = lb25 = lb10 = lb5 = lb2andhalf = plateWeight = 0;

          badges.forEach((badge) => {
            badge.innerText = "";
          });

          console.log(lb45, lb25, lb10, lb5, lb2andhalf, "dec");

          calcWeights();
        });

        results.classList.remove("hide");
      });

      resetBtn.addEventListener("click", () => {
        window.location.reload();
      });
    </script>
  </body>
</html>
